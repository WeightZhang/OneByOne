<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LMY-HOME</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//libs.cncdn.cn/highlight.js/8.4/styles/tomorrow.min.css">
    <script src="//libs.cncdn.cn/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- CSS -->                       
    <link rel="stylesheet" href="/statics/css/index.css">
</head>

<body>
    
    <div class="wrap">          
    <!--HEADER-->
<div class="header">
    <div class="logo"> <a href="/index.html"><img src="/images/logo.png" alt=""></a> </div>
    <div class="cssmenu">
        <ul>
            <li><a href="/index.html">HOME</a></li>       
            <li><a href="/blog/">BLOG</a></li>
            <li><a href="/demo/">DEMO</a></li>
            <li><a href="/about/">ABOUT</a></li>
            <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
        </ul>
    </div>
    <div class="top-nav">
        <nav class="clearfix">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/blog/">BLOG</a></li>
                <li><a href="/demo/">DEMO</a></li>
                <li><a href="/about/">ABOUT</a></li>
                <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
            </ul>
        <a href="#" id="pull">MENU</a> 
        </nav>
    </div>
</div>    
        <div id="container">
    <div class="content">
        <div class="page">
            <div class="post-content">
    <div class="title"><h1>5 Array Methods That You Should Be Using Now</h1></div>
    <p class="post-date">Jan 12, 2016</p>
                    
     <p>数组学习笔记</p>

<hr />

<ul id="markdown-toc">
  <li><a href="#indexof" id="markdown-toc-indexof">indexOf</a></li>
  <li><a href="#filter" id="markdown-toc-filter">filter</a></li>
  <li><a href="#foreach" id="markdown-toc-foreach">forEach</a></li>
  <li><a href="#map" id="markdown-toc-map">map</a></li>
  <li><a href="#reduce" id="markdown-toc-reduce">reduce</a></li>
  <li><a href="#section" id="markdown-toc-section">浏览器支持</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">最后说一句</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">参考资料</a></li>
</ul>

<p>当2009年12月3日ECMAScript5发布的时候，他带了了更新的数组方法用来提升现有的数组方法。然而由于缺少支持ES5的浏览器，使得这些方法当时并没有吸引开发者的注意。在9中数组方法中我挑选了5种方法，我个人认为是最有用的。</p>

<h3 id="indexof">indexOf</h3>

<p>indexOf()方法返回目标元素在数组中第一次出现的位置，数组中如果不存在改元素则返回-1，例子如下：</p>

<p>不使用indexof()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = ['apple','orange','pear'],
  found = false;

for(var i= 0, l = arr.length; i&lt; l; i++){
  if(arr[i] === 'orange'){
    found = true;
  }
}

console.log("found:",found); //found: true 
</code></pre>
</div>

<p>使用indexof()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = ['apple','orange','pear'];

console.log("found:", arr.indexOf("orange") != -1);  //found: true 
</code></pre>
</div>

<h3 id="filter">filter</h3>

<p>filter()方法创建一个新数组，新数组中的元素满足过滤的条件，例子如下：</p>

<p>不使用filter()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = [
  {"name":"apple", "count": 2},
  {"name":"orange", "count": 5},
  {"name":"pear", "count": 3},
  {"name":"orange", "count": 16},
];

var newArr = [];

for(var i= 0, l = arr.length; i&lt; l; i++){
  if(arr[i].name === "orange" ){
	newArr.push(arr[i]);
  }
}

console.log("Filter results:",newArr);  //Filter results: { "name": "orange", "count": 5 },{ "name": "orange", "count": 16 } 
</code></pre>
</div>

<p>使用filter()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = [
  {"name":"apple", "count": 2},
  {"name":"orange", "count": 5},
  {"name":"pear", "count": 3},
  {"name":"orange", "count": 16},
];

var newArr = arr.filter(function(item){
  return item.name === "orange";
 	});

console.log("Filter results:",newArr);  //Filter results: { "name": "orange", "count": 5 },{ "name": "orange", "count": 16 } 
</code></pre>
</div>

<h3 id="foreach">forEach</h3>

<p>forEach()方法相当于for对每个元素执行对应的方法，例子如下：</p>

 	var arr = [1,2,3,4,5,6,7,8];

<div class="highlighter-rouge"><pre class="highlight"><code>// Uses the usual "for" loop to iterate
for(var i= 0, l = arr.length; i&lt; l; i++){
  console.log(arr[i]);
}

console.log("========================");

//Uses forEach to iterate
arr.forEach(function(item,index){
  console.log(item);
});
</code></pre>
</div>

<p>forEach()方法是for循环的重大升级，如果这里只有一个方法可以选择，请选择forEach()吧。</p>

<h3 id="map">map</h3>

<p>map()方法对原数组的每个元素进行一定操作，返回一个新数组，例子如下：</p>

<p>不使用map()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var oldArr = [{first_name:"Colin",last_name:"Toh"},{first_name:"Addy",last_name:"Osmani"},{first_name:"Yehuda",last_name:"Katz"}];

function getNewArr(){

  var newArr = [];

  for(var i= 0, l = oldArr.length; i&lt; l; i++){
    var item = oldArr[i];
    item.full_name = [item.first_name,item.last_name].join(" ");
    newArr[i] = item;
  }

    return newArr;
}

console.log(getNewArr());  //{ "first_name": "Colin", "last_name": "Toh", "full_name": "Colin Toh" }
							,{ "first_name": "Addy", "last_name": "Osmani", "full_name": "Addy Osmani" }
							,{ "first_name": "Yehuda", "last_name": "Katz", "full_name": "Yehuda Katz" }
</code></pre>
</div>

<p>使用map()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var oldArr = [{first_name:"Colin",last_name:"Toh"},{first_name:"Addy",last_name:"Osmani"},{first_name:"Yehuda",last_name:"Katz"}];

function getNewArr(){
    
  return oldArr.map(function(item,index){
    item.full_name = [item.first_name,item.last_name].join(" ");
    return item;
  });

}

console.log(getNewArr());  //{ "first_name": "Colin", "last_name": "Toh", "full_name": "Colin Toh" }
							,{ "first_name": "Addy", "last_name": "Osmani", "full_name": "Addy Osmani" }
							,{ "first_name": "Yehuda", "last_name": "Katz", "full_name": "Yehuda Katz" }
</code></pre>
</div>

<h3 id="reduce">reduce</h3>

<p>reduce()方法作为一个累加器的功能，数组从左到右将其降低到一个值，例子如下：</p>

<p>不使用reduce()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = ["apple","orange","apple","orange","pear","orange"];

function getWordCnt(){
  var obj = {};

  for(var i= 0, l = arr.length; i&lt; l; i++){
    var item = arr[i];
    obj[item] = (obj[item] +1 ) || 1;
  }

  return obj;
}

console.log(getWordCnt());  //{ "apple": 2, "orange": 3, "pear": 1 }
</code></pre>
</div>

<p>使用reduce()的时候</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = ["apple","orange","apple","orange","pear","orange"];

function getWordCnt(){
  return arr.reduce(function(prev,next){
    prev[next] = (prev[next] + 1) || 1;
    return prev;
  },{});
}

console.log(getWordCnt());  //{ "apple": 2, "orange": 3, "pear": 1 }
</code></pre>
</div>

<p>reduce(callback,initialValue)具有两个参数，callback 函数和 initialValue，callback 函数自己本身具有四个参数 prev， next, index 以及 array。你只需要知道 prev和next。</p>

<p>prev指向数组的第一个元素，next指向第二个元素。但是请注意，当你传入初始值(initialValue)后，prev将是initivalValue，next指向数组中的第一个元素。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/*
* Difference between not passing any parameters
* and passing in a additional parameter into `reduce()`
*/

var arr = ["apple","orange"];

function noPassValue(){
  return arr.reduce(function(prev,next){
    console.log("prev:",prev);
    console.log("next:",next);
    
    return prev + " " +next;
  });
}
  function passValue(){
  return arr.reduce(function(prev,next){
    console.log("prev:",prev);
    console.log("next:",next);
    
    prev[next] = 1;
    return prev;
  },{});
}

console.log("No Additional parameter:",noPassValue());
console.log("----------------");
console.log("With {} as an additional parameter:",passValue());


//输出
prev: apple
next: orange
No Additional parameter: apple orange
----------------
prev: {}
next: apple
prev: { "apple": 1 }
next: orange
With {} as an additional parameter: { "apple": 1, "orange": 1 }
</code></pre>
</div>

<p>从上面代码中，你看到我们在每次迭代返回一个值。这个值被传递到下一个迭代的先前参数。下面的例子将给更清晰的解释：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var arr = ["apple","orange","apple","pear"];

function getWordCnt(){
  return arr.reduce(function(prev,next,index){
    console.log("&lt;b&gt;Iteration "+index+"&lt;/b&gt;");
    console.log("prev:",prev);
    console.log("next:",next);
    
    prev[next] = ++prev[next] || 1;
    console.log("Passing this to the 'prev' of the next iteration if any:",prev);
    console.log("---------------");
    return prev;
  },{});
}

console.log("&lt;b&gt;Final Object:&lt;/b&gt;",getWordCnt());


//输出
Iteration 0
prev: {}
next: apple
Passing this to the 'prev' of the next iteration if any: { "apple": 1 }
---------------
Iteration 1
prev: { "apple": 1 }
next: orange
Passing this to the 'prev' of the next iteration if any: { "apple": 1, "orange": 1 }
---------------
Iteration 2
prev: { "apple": 1, "orange": 1 }
next: apple
Passing this to the 'prev' of the next iteration if any: { "apple": 2, "orange": 1 }
---------------
Iteration 3
prev: { "apple": 2, "orange": 1 }
next: pear
Passing this to the 'prev' of the next iteration if any: { "apple": 2, "orange": 1, "pear": 1 }
---------------
Final Object: { "apple": 2, "orange": 1, "pear": 1 }
</code></pre>
</div>

<h3 id="section">浏览器支持</h3>

<p>根据ECMAScript兼容表，上述五中方法在所有移动浏览器中都能运行，几乎所有主流桌面浏览器也能运行，只有IE8及以前的不支持。</p>

<h3 id="section-1">最后说一句</h3>

<p>本文是翻译自一篇外文，不过翻译途中发现网上已经有人翻译了，顾在参考文献中列出了原文以及另一篇翻译文献，翻译的比较好，还有就是推荐直接看英文的。</p>

<h3 id="section-2">参考资料</h3>
<p>1、<a href="http://colintoh.com/blog/5-array-methods-that-you-should-use-today?utm_source=ourjs.com#array_%22extras%22">5 Array Methods That You Should Be Using Now</a></p>

<p>2、<a href="http://ourjs.com/detail/54a9f2ba5695544119000005">5个现在就该使用的数组Array方法</a></p>

                    
    <ul class="pagination">
        
        <li class="previous">
            <a href="/node/2015/12/27/gulp-start.html">Previous</a>
        </li>
        
        
    </ul>
</div>

            

<div class="catalog-menu">
    <h3>目&nbsp;&nbsp;录</h3>
    <div class="catalog-menu-content"></div>
</div>


<div class="comment">
    <span>Comments</span>
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/javascript/2016/01/12/5-array-methods-that-you-should-use-today" data-title="5 Array Methods That You Should Be Using Now" data-url="limingyang2012.github.io/javascript/2016/01/12/5-array-methods-that-you-should-use-today.html"></div>
    <!-- 多说评论框 end -->
</div>



                   
        </div>       
        
    </div>
</div>



<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"limingyang2012"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
</script>
<!-- 多说公共JS代码 end -->



    
        <!--回到顶部-->
        <a id="returnTop"></a>

    <!-- FOOTER -->
<div class="footer" >
    <p class="copyright">
       	&copy; 
        <span itemprop="copyrightYear">2016</span> 
        <span itemprop="name">&nbsp;limingyang2012</span>
    </p>
</div>
    </div>

    <script src="/statics/js/jquery.min.js"></script>
    <script src="/statics/js/index.js"></script>
    

</body>
</html>
