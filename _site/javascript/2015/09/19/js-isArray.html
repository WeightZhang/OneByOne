<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LMY-HOME</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//libs.cncdn.cn/highlight.js/8.4/styles/tomorrow.min.css">
    <script src="//libs.cncdn.cn/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- CSS -->                       
    <link rel="stylesheet" href="/statics/css/index.css">
</head>

<body>
    
    <div class="wrap">          
    <!--HEADER-->
<div class="header">
    <div class="logo"> <a href="/index.html"><img src="/images/logo.png" alt=""></a> </div>
    <div class="cssmenu">
        <ul>
            <li><a href="/index.html">HOME</a></li>       
            <li><a href="/blog/">BLOG</a></li>
            <li><a href="/demo/">DEMO</a></li>
            <li><a href="/about/">ABOUT</a></li>
            <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
        </ul>
    </div>
    <div class="top-nav">
        <nav class="clearfix">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/blog/">BLOG</a></li>
                <li><a href="/demo/">DEMO</a></li>
                <li><a href="/about/">ABOUT</a></li>
                <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
            </ul>
        <a href="#" id="pull">MENU</a> 
        </nav>
    </div>
</div>    
        <div id="container">
    <div class="content">
        <div class="page">
            <div class="post-content">
    <div class="title"><h1>js判断是否为数组的函数isArray()</h1></div>
    <p class="post-date">Sep 19, 2015</p>
                    
     <p>js判断是否为数组的函数isArray()学习笔记</p>

<hr />

<ul id="markdown-toc">
  <li><a href="#javascript" id="markdown-toc-javascript">Javascript数据结构</a>    <ul>
      <li><a href="#section" id="markdown-toc-section">动态类型</a></li>
      <li><a href="#section-1" id="markdown-toc-section-1">数据类型</a></li>
    </ul>
  </li>
  <li><a href="#js" id="markdown-toc-js">js判断数组类型的方法</a>    <ul>
      <li><a href="#typeof" id="markdown-toc-typeof">1、typeof操作符</a></li>
      <li><a href="#instanceof" id="markdown-toc-instanceof">2、instanceof操作符</a></li>
      <li><a href="#constructor" id="markdown-toc-constructor">3、constructor操作符</a></li>
      <li><a href="#section-2" id="markdown-toc-section-2">4、较为严谨并且通用的方法：</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">5、特性判断法</a></li>
      <li><a href="#section-4" id="markdown-toc-section-4">6、最简单的方法</a></li>
      <li><a href="#section-5" id="markdown-toc-section-5">7、和在一起就是</a></li>
    </ul>
  </li>
  <li><a href="#section-6" id="markdown-toc-section-6">参考链接：</a></li>
</ul>

<h3 id="javascript">Javascript数据结构</h3>

<h4 id="section">动态类型</h4>

<p>JavaScript 是一种弱类型或者说动态语言。这意味着你不用提前声明变量的类型，在程序运行过程中，类型会被自动确定。这也意味着你可以使用同一个变量保存不同类型的数据：</p>

<h4 id="section-1">数据类型</h4>

<p>最新的ECMAScript定义了7种数据类型</p>

<p>6种原始类型:</p>

<p>Boolean
、Null
、Undefined
、Number
、String
、Symbol (new in ECMAScript 6)</p>

<p>以及：</p>

<p>Object</p>

<h3 id="js">js判断数组类型的方法</h3>

<h4 id="typeof">1、typeof操作符</h4>
<p>对于Function，String，Number，Undefined等几种类型的对象来说，他完全可以胜任，但是为Array时,我们并不能得到一个array的返回值</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function a1(){
  return true;
}
console.log(typeof(a1)); //function

var a2 = 'javascript';
console.log(typeof(a2));//string

var a3 = 1;
console.log(typeof(a3));//number

var a4;
console.log(typeof(a4));//undefined

var a5 = [1,2,3];
console.log(typeof(a5));//object
</code></pre>
</div>

<h4 id="instanceof">2、instanceof操作符</h4>
<p>instance，故名思义，实例，例子，所以instanceof用于判断一个变量是否某个对象的实例，是一个三目运算式—和typeof最实质上的区别</p>

<div class="highlighter-rouge"><pre class="highlight"><code>a instanceof b?alert("true"):alert("false")
</code></pre>
</div>

<p>注意b值是你想要判断的那种数据类型，不是一个字符串，比如Array，返回值为一个布尔值。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var b1 = [1,2,3];
console.log(b1 instanceof Array);//true
</code></pre>
</div>

<h4 id="constructor">3、constructor操作符</h4>
<p>在W3C定义中的定义：constructor属性返回对创建此对象的数组函数的引用,就是返回对象相对应的构造函数。从定义上来说跟instanceof不太一致，但效果都是一样的。</p>

<p>如:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>(a instanceof Array)   //a是否Array的实例？true or false

(a.constructor == Array)  // a实例所对应的构造函数是否为Array? true or false
</code></pre>
</div>

<p>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var c1 = [1,2,3];
console.log(c1.constructor == Array);//true
            
function employee(name,job,born){
  this.name=name;
  this.job=job;
  this.born=born;
}
var bill = new employee("Bill Gates","Engineer",1985);
console.log(bill.constructor);//function employee(name,job,born)
</code></pre>
</div>

<p>判断各种类型的方法如下</p>

<div class="highlighter-rouge"><pre class="highlight"><code>console.log([].constructor == Array);
console.log({}.constructor == Object);
console.log("string".constructor == String);
console.log((123).constructor == Number);
console.log(true.constructor == Boolean);
</code></pre>
</div>

<h4 id="section-2">4、较为严谨并且通用的方法：</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>function isArray(object){
  return object &amp;&amp; typeof object==='object' &amp;&amp;
    Array == object.constructor;
}
</code></pre>
</div>

<p>注意</p>

<p>使用instaceof和construcor,被判断的array必须是在当前页面声明的！比如，一个页面（父页面）有一个框架，框架中引用了一个页面（子页面），在子页面中声明了一个array，并将其赋值给父页面的一个变量，这时判断该变量，Array == object.constructor;会返回false；</p>

<p>原因</p>

<p>a、array属于引用型数据，在传递过程中，仅仅是引用地址的传递。</p>

<p>b、每个页面的Array原生对象所引用的地址是不一样的，在子页面声明的array，所对应的构造函数，是子页面的Array对象；父页面来进行判断，使用的Array并不等于子页面的Array；切记，不然很难跟踪问题！</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var iframe = document.createElement('iframe');   
document.body.appendChild(iframe);   
xArray = window.frames[window.frames.length-1].Array;      
var arr = new xArray("1","2","3","4","5")
alert(arr instanceof Array); // false
alert(arr.constructor === Array); // false
</code></pre>
</div>

<p>返回结果为两个False，让人大失所望。</p>

<h4 id="section-3">5、特性判断法</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>function isArray(object){
return  object &amp;&amp; typeof object==='object' &amp;&amp;    
  typeof object.length==='number' &amp;&amp;  
  typeof object.splice==='function' &amp;&amp;    
    //判断length属性是否是可枚举的 对于数组 将得到false  
  !(object.propertyIsEnumerable('length'));
}
</code></pre>
</div>

<p>有length和splice并不一定是数组，因为可以为对象添加属性，而不能枚举length属性，才是最重要的判断因子。</p>

<h4 id="section-4">6、最简单的方法</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>var isArray = function(obj) { 
  return Object.prototype.toString.call(obj) === '[object Array]'; 
}
</code></pre>
</div>

<p>call改变toString的this引用为待检测的对象，返回此对象的字符串表示，然后对比此字符串是否是’[object Array]’，以判断其是否是Array的实例。也许你要问了，为什么不直接o.toString()？嗯，虽然Array继承自Object，也会有toString方法，但是这个方法有可能会被改写而达不到我们的要求，而Object.prototype则是老虎的屁股，很少有人敢去碰它的，所以能一定程度保证其“纯洁性”。</p>

<p>与前面几个方案不同，这个方法很好的解决了跨frame对象构建的问题，经过测试，各大浏览器兼容性也很好，可以放心使用。一个好消息是，很多框架，比如jQuery、Base2等等，都计划借鉴此方法以实现某些特殊的，比如数组、正则表达式等对象的类型判定，不用我们自己写了。</p>

<h4 id="section-5">7、和在一起就是</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>if (value instanceof Array ||
  (!(value instanceof Object) &amp;&amp;
    (Object.prototype.toString.call((value)) == '[object Array]') ||
    typeof value.length == 'number' &amp;&amp;
    typeof value.splice != 'undefined' &amp;&amp;
    typeof value.propertyIsEnumerable != 'undefined' &amp;&amp; !value.propertyIsEnumerable('splice'))) {
  return 'array';
}
</code></pre>
</div>

<h3 id="section-6">参考链接：</h3>
<p><a href="http://www.cnblogs.com/mofish/p/3388427.html">1、js数据类型判断和数组判断</a>;</p>

<p><a href="http://www.nowamagic.net/librarys/veda/detail/1250">2、js如何判断一个对象是不是Array</a></p>

<p><a href="http://my.oschina.net/ohcoding/blog/470952?p=1">3、js判断是否为数组的函数:isArray()</a></p>

                    
    <ul class="pagination">
        
        <li class="previous">
            <a href="/htmlcss/2015/09/15/clear-float.html">Previous</a>
        </li>
        
        
         <li class="next">
            <a href="/javascript/2015/10/05/oninput&onpropertychange.html">Next</a>
        </li>
        
    </ul>
</div>

            

<div class="catalog-menu">
    <h3>目&nbsp;&nbsp;录</h3>
    <div class="catalog-menu-content"></div>
</div>


<div class="comment">
    <span>Comments</span>
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/javascript/2015/09/19/js- isArray " data-title="js判断是否为数组的函数isArray()" data-url="limingyang2012.github.io/javascript/2015/09/19/js-isArray.html"></div>
    <!-- 多说评论框 end -->
</div>



                   
        </div>       
        
    </div>
</div>



<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"limingyang2012"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
</script>
<!-- 多说公共JS代码 end -->



    
        <!--回到顶部-->
        <a id="returnTop"></a>

    <!-- FOOTER -->
<div class="footer" >
    <p class="copyright">
       	&copy; 
        <span itemprop="copyrightYear">2016</span> 
        <span itemprop="name">&nbsp;limingyang2012</span>
    </p>
</div>
    </div>

    <script src="/statics/js/jquery.min.js"></script>
    <script src="/statics/js/index.js"></script>
    

</body>
</html>
