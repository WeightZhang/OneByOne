<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LMY-HOME</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//libs.cncdn.cn/highlight.js/8.4/styles/tomorrow.min.css">
    <script src="//libs.cncdn.cn/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- CSS -->                       
    <link rel="stylesheet" href="/statics/css/index.css">
</head>

<body>
    
    <div class="wrap">          
    <!--HEADER-->
<div class="header">
    <div class="logo"> <a href="/index.html"><img src="/images/logo.png" alt=""></a> </div>
    <div class="cssmenu">
        <ul>
            <li><a href="/index.html">HOME</a></li>       
            <li><a href="/blog/">BLOG</a></li>
            <li><a href="/demo/">DEMO</a></li>
            <li><a href="/about/">ABOUT</a></li>
            <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
        </ul>
    </div>
    <div class="top-nav">
        <nav class="clearfix">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/blog/">BLOG</a></li>
                <li><a href="/demo/">DEMO</a></li>
                <li><a href="/about/">ABOUT</a></li>
                <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
            </ul>
        <a href="#" id="pull">MENU</a> 
        </nav>
    </div>
</div>    
        <div id="container">
    <div class="content">
        <div class="page">
            <div class="post-content">
    <div class="title"><h1>通过js获取元素样式以及常用方法</h1></div>
    <p class="post-date">Dec 7, 2015</p>
                    
     <p>通过js获取元素样式以及常用方法总结</p>

<hr />

<ul id="markdown-toc">
  <li><a href="#getcomputedstyle" id="markdown-toc-getcomputedstyle">getComputedStyle方法</a>    <ul>
      <li><a href="#style" id="markdown-toc-style">style方法</a></li>
      <li><a href="#getcomputedstyle-1" id="markdown-toc-getcomputedstyle-1">getComputedStyle方法</a></li>
    </ul>
  </li>
  <li><a href="#section" id="markdown-toc-section">元素位置宽高</a>    <ul>
      <li><a href="#offsetleftoffsettop" id="markdown-toc-offsetleftoffsettop">offsetLeft、offsetTop</a></li>
      <li><a href="#offsetwidthoffsetheight" id="markdown-toc-offsetwidthoffsetheight">offsetWidth、offsetHeight</a></li>
      <li><a href="#getpos" id="markdown-toc-getpos">getPos()</a></li>
    </ul>
  </li>
  <li><a href="#section-1" id="markdown-toc-section-1">参考资料</a></li>
</ul>

<h3 id="getcomputedstyle">getComputedStyle方法</h3>

<p>虽然学了几个月了，但是晚上要用的时候又忘了，，还是捡起来总结下吧。</p>

<h4 id="style">style方法</h4>

<p>样式表有三种方式</p>

<ul>
  <li>
    <p>行间样式 ：是写在标签里面的。</p>
  </li>
  <li>
    <p>内部样式：是写在HTML的里面的style标签里面的。</p>
  </li>
  <li>
    <p>外部样式表：css写在html外部单独文件中，通过link引用。</p>
  </li>
</ul>

<p>在javascript中我们通常通过element.style.XXX进行属性值的设置，但是我们并不能通过element.style.XXX来获取属性的值，至少在内部样式和外部样式是不能通过这种方法获得的，当且仅当行间样式的时候才有效。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;div style="width:220px;height:220px"&gt;
&lt;/div&gt;

&lt;script&gt;
  var div = document.querySelectorAll("div")[0];
  console.log(div.style.height)
&lt;/script&gt;
</code></pre>
</div>

<p>只有当这种情况下时才有效，然后这不符合w3c规范的，所以并不能采用这种方法。</p>

<h4 id="getcomputedstyle-1">getComputedStyle方法</h4>

<p>getComputedStyle是一个可以获取当前元素所有最终使用的CSS属性值。返回的是一个CSS样式声明对象([object CSSStyleDeclaration])，只读。</p>

<ul>
  <li>
    <p>getComputedStyle获取的是计算机（浏览器）计算后的样式，但是不兼容IE6、7、8</p>
  </li>
  <li>
    <p>currentStyle方法兼容IE6、7、8，但是不兼容标准浏览器</p>
  </li>
</ul>

<p>所以就有必要做一下兼容，，不过貌似IE要被废掉了，，还是做一下吧。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function getStyle( obj, attr) { 
  return obj.currentStyle ? obj.currentStyle[attr]:getComputedStyle( obj )[attr]; 
}
</code></pre>
</div>

<p>注意事项：</p>

<ul>
  <li>
    <p>如果用以上的方法获取某个元素的复合样式，例如background，那么就不要用上面那种方式获取，在不同浏览器间有兼容性问题。用上面的方法获得单一样式，而不要用来获取复合样式。</p>
  </li>
  <li>
    <p>使用以上方法，注意不要多按空格</p>
  </li>
  <li>
    <p>使用以上方法，不要获取未设置后的样式，因为浏览器间不兼容</p>
  </li>
  <li>
    <p>在火狐4.0之前，有个bug，如果getComputedStyle后面不跟参数，会出现问题，所以有些人写成getComputedStyle(obj, false)，那个false就是为了解决这个bug。这里的bug也可以写成0，或者其他任何参数都可以。不过目前火狐的浏览器都比较高，因此这个问题已经不是很常见了。</p>
  </li>
</ul>

<h3 id="section">元素位置宽高</h3>

<h4 id="offsetleftoffsettop">offsetLeft、offsetTop</h4>

<p>元素.offsetLeft\offsetTop：只读 属性 当前元素到定位父级的距离（偏移值）</p>

<p>可以理解为到当前元素的offsetParent的距离</p>

<p>IE7及以下：</p>

<ul>
  <li>
    <p>如果自己没有定位，那么offsetLeft\offsetTop是到body的距离；</p>
  </li>
  <li>
    <p>如果当前元素有定位的情况下，那么offsetLeft\offsetTop是到它定位父级的距离</p>
  </li>
  <li>
    <p>如果当前元素没有定位父级的情况下，那么offsetLeft\offsetTop是到html的距离（但是IE8以上，是到body的距离）</p>
  </li>
</ul>

<p>如果没有定位父级：</p>

<ul>
  <li>
    <p>IE7及以下： offsetLeft \ offsetTop =&gt; html</p>
  </li>
  <li>
    <p>其他：offsetLeft \ offsetTop =&gt; body</p>
  </li>
</ul>

<p>如果有定位父级：</p>

<ul>
  <li>IE7及以下：</li>
</ul>

<p>如果自己没有定位，那么offsetLeft \ offsetTop 是到body的距离</p>

<p>如果自己有定位，那么就是到定位父级的距离</p>

<ul>
  <li>其他：到定位父级的距离</li>
</ul>

<h4 id="offsetwidthoffsetheight">offsetWidth、offsetHeight</h4>

<ul>
  <li>
    <p>元素.style.width：样式宽：就是给元素的style中设置的width的值，带单位</p>
  </li>
  <li>
    <p>clientWidth：可视区宽：样式宽 + padding，不带单位</p>
  </li>
  <li>
    <p>offsetWidth：占位宽：样式宽 + padding + border = 可视区宽 + border</p>
  </li>
</ul>

<h4 id="getpos">getPos()</h4>

<p>body的offsetTop是0；body的offsetParent是null。</p>

<p>下面是获取一个元素到达页面的绝对距离的方式，getPos函数。注意，一般工作中，把body的margin值清掉，这样可以避免IE6、7与其他标准浏览器在getPos上的差异。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function getPos(obj){
  var pos = {left: 0, top: 0};
  while(obj){
    pos.left += obj.offsetLeft;
    pos.top += obj.offsetTop;
    obj = obj.offsetParent;
  }
  return pos;
}
</code></pre>
</div>

<h3 id="section-1">参考资料</h3>

<p><a href="http://fantaghiro.github.io/study/2014/09/16/JS-Intermediary-Lessons-From-MiaoV.html#offsetleftoffsettop">1、妙味课堂——JavaScrip中级课程笔记 </a></p>

<p><a href="http://www.zhangxinxu.com/wordpress/2012/05/getcomputedstyle-js-getpropertyvalue-currentstyle/">2、获取元素CSS值之getComputedStyle方法熟悉</a></p>

<p><a href="http://www.jb51.net/article/43470.htm">3、解析offsetHeight,clientHeight,scrollHeight之间的区别</a></p>


                    
    <ul class="pagination">
        
        <li class="previous">
            <a href="/htmlcss/2015/10/21/netease-layout.html">Previous</a>
        </li>
        
        
         <li class="next">
            <a href="/htmlcss/2015/12/24/nth-child.html">Next</a>
        </li>
        
    </ul>
</div>

            

<div class="catalog-menu">
    <h3>目&nbsp;&nbsp;录</h3>
    <div class="catalog-menu-content"></div>
</div>


<div class="comment">
    <span>Comments</span>
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/javascript/2015/12/07/javascript-getStyle" data-title="通过js获取元素样式以及常用方法" data-url="limingyang2012.github.io/javascript/2015/12/07/javascript-getStyle.html"></div>
    <!-- 多说评论框 end -->
</div>



                   
        </div>       
        
    </div>
</div>



<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"limingyang2012"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
</script>
<!-- 多说公共JS代码 end -->



    
        <!--回到顶部-->
        <a id="returnTop"></a>

    <!-- FOOTER -->
<div class="footer" >
    <p class="copyright">
       	&copy; 
        <span itemprop="copyrightYear">2016</span> 
        <span itemprop="name">&nbsp;limingyang2012</span>
    </p>
</div>
    </div>

    <script src="/statics/js/jquery.min.js"></script>
    <script src="/statics/js/index.js"></script>
    

</body>
</html>
