<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LMY-HOME</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//libs.cncdn.cn/highlight.js/8.4/styles/tomorrow.min.css">
    <script src="//libs.cncdn.cn/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- CSS -->                       
    <link rel="stylesheet" href="/statics/css/index.css">
</head>

<body>
    
    <div class="wrap">          
    <!--HEADER-->
<div class="header">
    <div class="logo"> <a href="/index.html"><img src="/images/logo.png" alt=""></a> </div>
    <div class="cssmenu">
        <ul>
            <li><a href="/index.html">HOME</a></li>       
            <li><a href="/blog/">BLOG</a></li>
            <li><a href="/demo/">DEMO</a></li>
            <li><a href="/about/">ABOUT</a></li>
            <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
        </ul>
    </div>
    <div class="top-nav">
        <nav class="clearfix">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/blog/">BLOG</a></li>
                <li><a href="/demo/">DEMO</a></li>
                <li><a href="/about/">ABOUT</a></li>
                <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
            </ul>
        <a href="#" id="pull">MENU</a> 
        </nav>
    </div>
</div>    
        <div id="container">
    <div class="content">
        <div class="page">
            <div class="post-content">
    <div class="title"><h1>onchange和oninput对于文本框的作用</h1></div>
    <p class="post-date">Oct 5, 2015</p>
                    
     <p>onchange、oninput对于文本框的作用学习笔记</p>

<hr />

<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">分别描述三种事件</a>    <ul>
      <li><a href="#onchange" id="markdown-toc-onchange">1、onchange</a></li>
      <li><a href="#onpropertychange" id="markdown-toc-onpropertychange">2、onpropertychange</a></li>
      <li><a href="#oninput" id="markdown-toc-oninput">3、oninput</a></li>
    </ul>
  </li>
  <li><a href="#section-1" id="markdown-toc-section-1">三种事件综合</a></li>
  <li><a href="#section-2" id="markdown-toc-section-2">三种事件区别</a></li>
  <li><a href="#section-3" id="markdown-toc-section-3">参考链接</a></li>
</ul>

<h3 id="section">分别描述三种事件</h3>

<h4 id="onchange">1、onchange</h4>
<p>对于text文本框来说，当光标离开元素的时候再去判断值是否发生了变化，如果发生了变化则触发onchange事件。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>HTML
&lt;input type="text" name="username" /&gt;

JS
$('input').onchange = function() {
  console.log(this.value);
}
</code></pre>
</div>

<p>上述代码，当鼠标在文本框中输入内容，且光标离开后，会输出修改后的内容；</p>

<p><code class="highlighter-rouge">注</code>：onchange处理文本框时最大的缺点就是不能实时判断，必须等到光标离开后才判断值是否改变了。对于需要实时判断的就不是很方便。</p>

<p>为了进行实时判断我用了onfocus和onkeyup两个事件进行了嵌套进行判断，这是在我还不知道有oninput事件存在的时候使用过的。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$('input').onfocus = function(){
  document.onkeyup = function(){
	//需要处理的内容
  }	
}
</code></pre>
</div>

<h4 id="onpropertychange">2、onpropertychange</h4>
<p>onpropertychange属性可在某些情况下解决上面存在的问题，不用考虑是否失去焦点，不管js操作还是键盘鼠标手动操作，只要HTML元素属性发生改变即可立即捕获到。遗憾的是，onpropertychange为IE专属的。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>HTML
&lt;input type="text" name="username" /&gt;

JS
// Internet Explorer
function OnPropChanged (event) {
  if (event.propertyName.toLowerCase () == "value") {
      alert ("The new content: " + event.srcElement.value);
  }
} 
$('input').attachEvent("onpropertychange", OnPropChanged);
</code></pre>
</div>

<h4 id="oninput">3、oninput</h4>
<p>oninput 是onpropertychange的非IE浏览器版本，支持firefox和opera等浏览器，但有一点不同，它绑定于对象时，并非该对象所有属性改变都能触发事件，它 只在对象value值发生改变时奏效 。JS改变value时不能触发。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>HTML
&lt;input type="text" name="username" /&gt;

JS
// Firefox, Google Chrome, Opera, Safari, Internet Explorer from version 9
function OnInput (event) {
  alert ("The new content: " + event.target.value);
}
$('input').addEventListener("input", OnInput);
</code></pre>
</div>

<h3 id="section-1">三种事件综合</h3>
<p>兼容的写法就是需要onpropertychange（用在IE浏览器）和oninput（非IE浏览器）结合在一起同时使用。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>HTML
&lt;input type="text" name="username" /&gt;

JS
// Internet Explorer
function OnPropChanged (event) {
  if (event.propertyName.toLowerCase () == "value") {
    alert ("The new content: " + event.srcElement.value);
  }
} 

// Firefox, Google Chrome, Opera, Safari, Internet Explorer from version 9
function OnInput (event) {
  alert ("The new content: " + event.target.value);
}

function addInputEventListener() {
  // all browsers except IE before version 9
  if ($('input').addEventListener) { 
    $('input').addEventListener("input", OnInput);
  }
  // Internet Explorer and Opera
  if ($('input').attachEvent) { 
    $('input').attachEvent("onpropertychange", OnPropChanged); 
  }
}
</code></pre>
</div>

<h3 id="section-2">三种事件区别</h3>
<p>a、onchange事件与onpropertychange事件的区别：</p>

<blockquote>
  <p>onchange事件在内容改变（两次内容有可能还是相等的）且失去焦点时触发；onpropertychange事件却是实时触发，即每增加或删除一个字符就会触发，通过js改变也会触发该事件，但是该事件IE专有。</p>
</blockquote>

<p>b、oninput事件与onpropertychange事件的区别：</p>

<blockquote>
  <p>oninput事件是IE之外的大多数浏览器支持的事件，在value改变时触发，实时的，即每增加或删除一个字符就会触发，然而通过js改变value时，却不会触发；onpropertychange事件是任何属性改变都会触发的，而oninput却只在value改变时触发，oninput要通过addEventListener()来注册，onpropertychange注册方式跟一般事件一样。（此处都是指在js中动态绑定事件，以实现内容与行为分离）</p>
</blockquote>

<p>c、oninput与onpropertychange失效的情况：</p>

<p>（1）oninput事件：a). 当脚本中改变value时，不会触发；b).从浏览器的自动下拉提示中选取时，不会触发。 
（2）onpropertychange事件：当input设置为disable=true后，onpropertychange不会触发。</p>

<h3 id="section-3">参考链接</h3>
<p><a href="http://blog.csdn.net/freshlover/article/details/39050609">1、总结oninput、onchange与onpropertychange事件的用法和区别 </a>;</p>

<p><a href="http://www.tuicool.com/articles/iIFfymZ">2、onpropertychange事件没有触发的处理方法</a></p>

<p><a href="http://www.cnblogs.com/lhb25/archive/2012/11/30/oninput-and-onpropertychange-event-for-input.html">3、实时监听输入框值变化的完美方案：oninput &amp; onpropertychange</a></p>

                    
    <ul class="pagination">
        
        <li class="previous">
            <a href="/javascript/2015/09/19/js-isArray.html">Previous</a>
        </li>
        
        
         <li class="next">
            <a href="/javascript/2015/10/08/JavaScript-scope.html">Next</a>
        </li>
        
    </ul>
</div>

            

<div class="catalog-menu">
    <h3>目&nbsp;&nbsp;录</h3>
    <div class="catalog-menu-content"></div>
</div>


<div class="comment">
    <span>Comments</span>
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/javascript/2015/10/05/oninput&onpropertychange" data-title="onchange和oninput对于文本框的作用" data-url="limingyang2012.github.io/javascript/2015/10/05/oninput&onpropertychange.html"></div>
    <!-- 多说评论框 end -->
</div>



                   
        </div>       
        
    </div>
</div>



<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"limingyang2012"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
</script>
<!-- 多说公共JS代码 end -->



    
        <!--回到顶部-->
        <a id="returnTop"></a>

    <!-- FOOTER -->
<div class="footer" >
    <p class="copyright">
       	&copy; 
        <span itemprop="copyrightYear">2016</span> 
        <span itemprop="name">&nbsp;limingyang2012</span>
    </p>
</div>
    </div>

    <script src="/statics/js/jquery.min.js"></script>
    <script src="/statics/js/index.js"></script>
    

</body>
</html>
