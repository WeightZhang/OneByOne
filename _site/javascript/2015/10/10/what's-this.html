<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LMY-HOME</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <!-- highlight.js -->
    <link rel="stylesheet" href="//libs.cncdn.cn/highlight.js/8.4/styles/tomorrow.min.css">
    <script src="//libs.cncdn.cn/highlight.js/8.4/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- CSS -->                       
    <link rel="stylesheet" href="/statics/css/index.css">
</head>

<body>
    
    <div class="wrap">          
    <!--HEADER-->
<div class="header">
    <div class="logo"> <a href="/index.html"><img src="/images/logo.png" alt=""></a> </div>
    <div class="cssmenu">
        <ul>
            <li><a href="/index.html">HOME</a></li>       
            <li><a href="/blog/">BLOG</a></li>
            <li><a href="/demo/">DEMO</a></li>
            <li><a href="/about/">ABOUT</a></li>
            <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
        </ul>
    </div>
    <div class="top-nav">
        <nav class="clearfix">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/blog/">BLOG</a></li>
                <li><a href="/demo/">DEMO</a></li>
                <li><a href="/about/">ABOUT</a></li>
                <li><a href="http://limingyang2012.github.io/cv/">RESUME</a></li>
            </ul>
        <a href="#" id="pull">MENU</a> 
        </nav>
    </div>
</div>    
        <div id="container">
    <div class="content">
        <div class="page">
            <div class="post-content">
    <div class="title"><h1>JS中的this简单描述</h1></div>
    <p class="post-date">Oct 10, 2015</p>
                    
     <p>JavaScript中的this学习笔记</p>

<hr />

<ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">几种情况讨论</a>    <ul>
      <li><a href="#section-1" id="markdown-toc-section-1">作为纯粹的函数调用</a></li>
    </ul>
  </li>
  <li><a href="#section-2" id="markdown-toc-section-2">作为对象的方法调用</a>    <ul>
      <li><a href="#new" id="markdown-toc-new">作为构造函数，关键字new</a></li>
      <li><a href="#callapplythis" id="markdown-toc-callapplythis">使用call和apply设置this</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">特殊情况</a></li>
    </ul>
  </li>
  <li><a href="#section-4" id="markdown-toc-section-4">简单总结</a></li>
  <li><a href="#section-5" id="markdown-toc-section-5">参考资料：</a></li>
</ul>

<p>在JavaScript中，this 的概念比较复杂。由于其运行期绑定的特性，JavaScript 中的 this它可以是全局对象、当前对象或者任意对象，这完全取决于函数的调用方式。JavaScript 中函数的调用有以下几种方式：作为对象方法调用，作为函数调用，作为构造函数调用，和使用 apply 或 call 调用。下面我们将按照调用方式的不同，分别讨论 this 的含义。</p>

<p>首先我们先看两个例题</p>

<p>例子1：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "The Window";
var object = {
　name:"My Object",
　getNameFunc:function(){
　　return function(){
　　　return this.name;
　　};
　}
};
console.log(object.getNameFunc()());
</code></pre>
</div>

<p>例子2：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "The Window";
var object = {
　name:"My Object",
　getNameFunc:function(){
　　var that = this;
　　return function(){
　　　return that.name;
　　};

　}
};
console.log(object.getNameFunc()());
</code></pre>
</div>

<h3 id="section">几种情况讨论</h3>

<h4 id="section-1">作为纯粹的函数调用</h4>

<p>函数可以直接被调用，此时 this 绑定到全局对象。在浏览器中，window 就是该全局对象</p>

<p>测试1.1：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function testThis(v) {  
  this.x = v;  
}  
testThis(2);  
console.log(x);//2 
</code></pre>
</div>

<p>测试1.2：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>x = 1;
function testThis(v) {  
  this.x = v;  
}  
testThis(2);  
console.log(x);//2 
</code></pre>
</div>

<p>通过测试2可以知道作为单纯的函数调用时this指向了全局对象，即window。</p>

<h3 id="section-2">作为对象的方法调用</h3>

<p>在 JavaScript 中，函数也是对象，因此函数可以作为一个对象的属性，此时该函数被称为该对象的方法，在使用这种调用方式时，this 被自然绑定到该对象，这时this就指该对象。</p>

<p>测试2.1</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "李明洋";  
var person = {  
  name : "李小洋",  
  sayName : function(){  
	console.log(this.name );  
  }  
}  
person.sayName();//李小洋
</code></pre>
</div>

<p>测试2.2</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "李明洋";  
var person = {  
  name : "李小洋",  
  sayName : function(){  
	console.log(this.name );  
  }  
}  
var sayName = person.sayName;
sayName()//李明洋
</code></pre>
</div>

<p>this关键字虽然是在person.sayName中声明的，但运行的时候是window，所以执行时的当前对象时window。所以输出是全局变量值<code class="highlighter-rouge">李明洋</code>；</p>

<p>测试2.3</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "李明洋";
var person1 = {
  name: "李小洋",
  sayName: function(){
    console.log(this.name);
  }
};
var person2 = {
  name: "李洋洋",
  sayName: function(){
    var fun = person1.sayName;
    fun();
  }
};
person2.sayName();　　//李明洋
</code></pre>
</div>

<p>求解释啊！！！</p>

<h4 id="new">作为构造函数，关键字new</h4>

<p>new关键字后的构造函数中的this指向用该构造函数构造出来的新对象。</p>

<p>测试3.1</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function Person(name,age){
  this.name = name;
  this.age = age;       
}
Person.prototype.show = function(){
  console.log(this.name);
  console.log(this.age);
}

var mySelf = new Person("李明洋",23);
mySelf.show();        //李明洋，23
</code></pre>
</div>

<h4 id="callapplythis">使用call和apply设置this</h4>

<p>apply和call能够强制改变函数执行时的当前对象，让this指向其他对象。</p>

<p>测试4.1</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "李明洋";
var person1 = {
  name: "李小洋",
  sayName: function(){
	console.log(this.name);
  }
};
var person2 = {
  name: "李洋洋"
};
person1.sayName();//李小洋
person1.sayName.apply();//李明洋
person1.sayName.apply(person2);//李洋洋
</code></pre>
</div>

<p>apply用于改变函数执行时的当前对象，当无参数时，当前对象为window，有参数时当前对象为该参数。</p>

<h4 id="section-3">特殊情况</h4>

<p>–在浏览器中setTimeout、setInterval和匿名函数执行时的当前对象是全局对象window</p>

<p>测试5.1：匿名函数，也就是例子1</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "The Window";
var object = {
　name:"My Object",
　getNameFunc:function(){
　　return function(){
　　　return this.name;
　　};
　}
};
console.log(object.getNameFunc()());//The Window
</code></pre>
</div>

<p>那么如果想输出My Object怎么办呢。可以在定义匿名函数之前，把this对象的值赋给that，这样that就指向object了。并且由于闭包的特性，内部函数是可以访问到的。如下：</p>

<p>测试5.2：输出My Object,也就是例子2</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "The Window";
var object = {
　name:"My Object",
　getNameFunc:function(){
　　var that = this;
　　return function(){
　　　return that.name;
　　};

　}
};
console.log(object.getNameFunc()());//My Object
</code></pre>
</div>

<p>测试5.3：setTimeout、setInterval</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var name = "李明洋";  
var person ={  
  name : "李小洋",  
  sayName : function(){  
	console.log(this.name);  
  },  
  waitSayName : function(){  
	setTimeout(this.sayName, 1000);  
  }  
};  
person.waitSayName();//李明洋
</code></pre>
</div>

<p>setTimeout、setInterval执行时的当前对象是全局对象window；</p>

<h3 id="section-4">简单总结</h3>

<ul>
  <li>
    <p>作为纯粹的函数调用，此时 this 绑定到全局对象。在浏览器中，window 就是该全局对象</p>
  </li>
  <li>
    <p>当函数作为对象的方法调用时，this指向该对象。</p>
  </li>
  <li>
    <p>new关键字后的构造函数中的this指向用该构造函数构造出来的新对象。</p>
  </li>
  <li>
    <p>apply和call能够强制改变函数执行时的当前对象，让this指向其他对象。</p>
  </li>
  <li>
    <p>在浏览器中setTimeout、setInterval和匿名函数执行时的当前对象是全局对象window。嵌套函数中的this不会继承上层函数的this，如果需要，可以用一个变量保存上层函数的this。</p>
  </li>
</ul>

<h3 id="section-5">参考资料：</h3>

<p><a href="http://www.ibm.com/developerworks/cn/web/1207_wangqf_jsthis/">1、深入浅出 JavaScript 中的 this </a></p>

<p><a href="http://www.ruanyifeng.com/blog/2010/04/using_this_keyword_in_javascript.html">2、Javascript的this用法</a></p>

<p><a href="http://www.cnblogs.com/justany/archive/2012/11/01/the_keyword_this_in_javascript.html">3、Javascript中this关键字详解</a></p>

<p><a href="http://www.csdn.net/article/2013-05-08/2815182-javascript-this">4、详解JavaScript中的this</a></p>

<p><a href="http://blog.jobbole.com/67347/">5、JavaScript中this的工作原理以及注意事项</a></p>

                    
    <ul class="pagination">
        
        <li class="previous">
            <a href="/javascript/2015/10/10/JS-OOP.html">Previous</a>
        </li>
        
        
         <li class="next">
            <a href="/webapp/2015/10/20/hello-mobile-web-viewport.html">Next</a>
        </li>
        
    </ul>
</div>

            

<div class="catalog-menu">
    <h3>目&nbsp;&nbsp;录</h3>
    <div class="catalog-menu-content"></div>
</div>


<div class="comment">
    <span>Comments</span>
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/javascript/2015/10/10/what's this" data-title="JS中的this简单描述" data-url="limingyang2012.github.io/javascript/2015/10/10/what's-this.html"></div>
    <!-- 多说评论框 end -->
</div>



                   
        </div>       
        
    </div>
</div>



<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    var duoshuoQuery = {short_name:"limingyang2012"};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0] 
            || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
</script>
<!-- 多说公共JS代码 end -->



    
        <!--回到顶部-->
        <a id="returnTop"></a>

    <!-- FOOTER -->
<div class="footer" >
    <p class="copyright">
       	&copy; 
        <span itemprop="copyrightYear">2016</span> 
        <span itemprop="name">&nbsp;limingyang2012</span>
    </p>
</div>
    </div>

    <script src="/statics/js/jquery.min.js"></script>
    <script src="/statics/js/index.js"></script>
    

</body>
</html>
